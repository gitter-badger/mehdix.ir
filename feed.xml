<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
<title type="text" xml:lang="fa">مهدی صادقی</title>
<link rel="alternate" type="text/html" href="http://mehdix.ir"/>
<link rel="self" type="application/atom+xml" href="http://mehdix.ir/feed/"/>
<updated>2015-05-31T19:48:46Z</updated>
<id>urn:uuid:1e7d9dd8-29e4-475d-adc5-17494fb80445</id>
<author>
	<name>Mehdi Sadeghi</name>
	<uri>http://mehdix.ir</uri>
	<email>sadeghi@mehdix.org</email>
</author>
<rights>Commons Attribution 4.0 International</rights>

	<entry>
		<title>مهاجرت به اتم از سمت راست</title>
		<link rel="alternate" type="text/html" href="http://mehdix.ir/rtl-feed.html"/>
		<id>urn:uuid:19441379-708e-47d6-8f71-8fb322d315c7</id>
		<updated>2015-05-31T00:00:00Z</updated>
		<category term="atom"/><category term="خوراک"/><category term="rss"/><category term="rtl"/>
			<content type="html">
				<![CDATA[<div dir="rtl"><p>نمایش راست به چپ خوراک بسیاری از وبسایت‌های فارسی در خبرخوان‌ها درست نیست. بنابراین تصمیم گرفتم این مساله را بررسی کنم و حداقل از نمایش صحیح مطالب وبسایت خودم در خبرخوان‌ها اطمینان حاصل کنم.</p>

<p>من برای مطالعه منابع مختلف اینترنتی از خبرخوان‌<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> استفاده می‌کنم. <a href="https://digg.com/reader">خبرخوان محبوب من</a> یک بدیل<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup> از گوگل‌ریدر مرحوم است که بخشی از سایت دیگ حساب می‌شود. من به طور معمول خوراک‌ها را به دیگ اضافه می‌کنم و همانجا هم می‌خوانم. مشکل اینجاست که درستی نمایش متن در وبسایت اصلی هیچ ربطی به نمایش در خوراک‌خوان ندارد. علت اینجاست که خوراک‌خوان متنی که معمولا توسط فایلی به feed.xml یا توسط feedburnder تولید می‌شود را دانلود و پردازش می‌کند و سعی می‌کند آن را به نحو صحیح نمایش بدهد.</p>

<p>از جایی که مطالب من نیز در دیگ چپ به راست نمایش داده می‌شد اول به سراغ تعریفی<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup> رفتم که خوراک سایتم مطابق آن تولید می‌شود. در وب دو استاندارد بسیار آشنا برای خروجی خوراک‌ها وجود دارد. اولی <sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup>RSS 2.0 و دیگری <sup id="fnref:5"><a href="#fn:5" class="footnote">5</a></sup>Atom 1.0 است. این دو تقریبا همه خوراک‌های موجود در وب را شامل می‌شوند. با جستجویی در تعریف آنها به این نتیجه رسیدم که امکان مشخص کردن جهت متن در تعریف آنها تعبیه نشده است (تا جایی که من جستجو کردم). بنابراین به دنبال راه حل دیگری برآمدم. با تغییر تگی که شامل محتوای هر پست است سعی کردم محتوای هر پست را در یک تگ html با استایل راست به چپ محصور کنم.</p>

<figure class="center border">
  <figcaption>
نمایش نادرست نوشتار راست به چپ
</figcaption>
  <p><img src="assets/postimages/rtl-feed/before.png" alt="image not found" title="نمایش خوراک پیش از اعمال تغییرات" /></p>
</figure>

<p>تصویر بالا نشان می‌دهد که من در سایت دیگ چطور بیشتر مطالب فارسی را می‌بینم. من قالبی که مسئول تولید خوراک وبسایتم است به شیوه زیر تغییر دادم تا هم با فرمت Atom 1.0 سازگار شود و هم محتوای هر پست در یک تگ ’div’ محصور شود. در ضمن من می‌خواهم که یک خوراک معتبر داشته باشم که بدون مشکل در فید‌خوان‌های مختلف به نمایش دربیاید.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>
---
---
<span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;feed</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2005/Atom</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
<span style="color:#070;font-weight:bold">&lt;title</span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">text</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xml:lang</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">fa</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>{{ site.title }}<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
<span style="color:#070;font-weight:bold">&lt;link</span> <span style="color:#b48">rel</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">alternate</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">text/html</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">{{ site.url }}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;link</span> <span style="color:#b48">rel</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">self</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">application/atom+xml</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">{{ site.url }}/feed/</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;updated&gt;</span>{{ site.time | date: &quot;%Y-%m-%dT%H:%M:%SZ&quot; }}<span style="color:#070;font-weight:bold">&lt;/updated&gt;</span>
<span style="color:#070;font-weight:bold">&lt;id&gt;</span>urn:uuid:1e7d9dd8-29e4-475d-adc5-17494fb80445<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>
<span style="color:#070;font-weight:bold">&lt;author&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;name&gt;</span>{{ site.author }}<span style="color:#070;font-weight:bold">&lt;/name&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;uri&gt;</span>{{ site.url }}<span style="color:#070;font-weight:bold">&lt;/uri&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;email&gt;</span>{{ site.email }}<span style="color:#070;font-weight:bold">&lt;/email&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
<span style="color:#070;font-weight:bold">&lt;rights&gt;</span>{{ site.copyright }}<span style="color:#070;font-weight:bold">&lt;/rights&gt;</span>
{% for post in site.posts limit: 8 %}
        <span style="color:#070;font-weight:bold">&lt;entry&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;title&gt;</span>{{ post.title }}<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;link</span> <span style="color:#b48">rel</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">alternate</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">text/html</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">{{ site.url }}{{ post.url }}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;id&gt;</span>urn:uuid:{{ post.uuid }}<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;updated&gt;</span>{{ post.date | date: &quot;%Y-%m-%dT%H:%M:%SZ&quot; }}<span style="color:#070;font-weight:bold">&lt;/updated&gt;</span>
                {% for tag in post.tags %}<span style="color:#070;font-weight:bold">&lt;category</span> <span style="color:#b48">term</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">{{ tag }}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>{% endfor %}
                        <span style="color:#070;font-weight:bold">&lt;content</span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">html</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
                                <span style="font-weight:bold;color:#666">&lt;![CDATA[</span>&lt;div dir=&quot;rtl&quot;&gt;{{ post.content }}&lt;/div&gt;<span style="font-weight:bold;color:#666">]]&gt;</span>
                        <span style="color:#070;font-weight:bold">&lt;/content&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/entry&gt;</span>
{% endfor %}
<span style="color:#070;font-weight:bold">&lt;/feed&gt;</span>

</pre></div>
</div>
</div>

<h2 id="rss">اتم یا RSS؟</h2>
<p>کدی که در بالا آمده مطابق با استاندارد اتم ۱.۰ است. پیش از این از RSS استفاده می‌کردم ولی متوجه شدم که فرمتی بسیار مبهم است و طراحی خوبی ندارد (مقاله خوبی در شرح این اشکالات و مقایسه اتم و RSS به زبان انگلیسی <a href="http://nullprogram.com/blog/2013/09/23/">در این سایت</a> وجود دارد). برای پشتبانی از اتم مجبور بودم به تمام مطالب قبلی وبسایت نیز یک uuid اختصاص بدهم و از این پس هم برای هر مطلب جدید اینکار را انجام بدهم، چرا که طبق اتم هر مطلب باید یک آی‌دی منحصر به فرد داشته باشد تا برای خوراک‌خوان‌ها تشخیص مطالب تکراری و یکتا امکانپذیر باشد.</p>

<p>بهرحال با تغییر ساده‌ای که در بالا آمده اکنون خوراک وبسایت به درستی در خوراک‌خوان (الااقل دیگ) به نمایش درمی‌آید! در تصویر زیر این امر پیداست. هرچند عنوان مطلب همچنان در سمت چپ نمایش داده می‌شود که برای آن کاری از دستم ساخته نیست. البته خرده‌کاری‌هایی هم باقی مانده است. مثلا در حال حاضر کدهای داخل متن راست چین نمایش داده می‌شود که باید با اصلاح استایل‌ خوراک آن‌ها را درست کنم، اما باشد برای فرصتی دیگر.</p>

<figure class="center border">
  <figcaption>
نمایش ‫‫بهتر متن راست به چپ پس از اعمال تغییرات
</figcaption>
  <p><img src="assets/postimages/rtl-feed/after.png" alt="image not found" title="نمایش خوراک پیش از اعمال تغییرات" /></p>
</figure>

<p>حسن ختام این پست نیز لینک به صفحه اعتبارسنجی خوراک وبسایت است!</p>

<p class="center"><a href="http://validator.w3.org/feed/check.cgi?url=http%3A//mehdix.ir/feed.xml"><img src="assets/valid-atom.png" alt="[Valid Atom 1.0]" title="Validate my Atom 1.0 feed" /></a></p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Feed reader <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Replica <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>Specifications <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>https://www.ietf.org/rfc/rfc4287.txt <a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>http://cyber.law.harvard.edu/rss/rss.html <a href="#fnref:5" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>]]>
			</content>
	</entry>

	<entry>
		<title>سوزه یا زوزه</title>
		<link rel="alternate" type="text/html" href="http://mehdix.ir/suse.html"/>
		<id>urn:uuid:f0ee6713-89fe-462c-be6f-608c47ca7b13</id>
		<updated>2015-05-25T00:00:00Z</updated>
		<category term="تلفظ"/><category term="سوزه"/><category term="زوزه"/>
			<content type="html">
				<![CDATA[<div dir="rtl"><p>مدتها پیش که در تهران مشغول به کار بودم بحثی داشتم با دوست و همکارم <a href="http://aidinhut.com/">آیدین</a> در مورد تلفظ صحیح توزیع <strong>SUSE</strong> و <strong>openSUSE</strong>. آیدین می‌گفت که باید لغت SUSE رو «زوزه» تلفظ کرد و من می‌گفتم «سوزه».</p>

<p>البته خاطرم نیست که منبعش کجا بود اما احتمالا تلفظش رو آنلاین چک کرده بود یا جایی در مستندات پروژه دیده بود یا گوش کرده بود. بهرحال بعد از گذشت چندین سال من سر از آلمان درآوردم که از قضا محل تولد توزیع <strong>SUSE</strong> و <strong>openSUSE</strong> است. و حالا با داشتن یک کارشناس در محل خیلی بهتر می‌شود اصل موضوع رو تحقیق کرد!</p>

<p class="center"><a title="By Slomox based on Germany_location_map.svg, Image:Holland_position.svg, Image:Provinces_de_Belgique_sans_noms.svg + diwa.info and MAND atlas [CC BY-SA 3.0 (http://creativecommons.org/licenses/by-sa/3.0)], via Wikimedia Commons" href="http://commons.wikimedia.org/wiki/File%3AIk-ich-Isogloss_-_Uerdinger_Lien.svg"><img width="512" alt="Ik-ich-Isogloss - Uerdinger Lien" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Ik-ich-Isogloss_-_Uerdinger_Lien.svg/512px-Ik-ich-Isogloss_-_Uerdinger_Lien.svg.png" /></a></p>

<p>همانطوری که در تصور بالا پیداست کشور آلمان به دو بخش بزرگ از نظر لهجه تقسیم می‌شود، بخش شمالی و جنوبی و طرز ادای کلمات در لهجه‌های شمال و جنوب آلمان متفاوت است. هرچند این تصویر به نحوه ادای کلمه «ich» به معنای «من» مربوط می‌شود. به طور کلی هر زمان در زبان آلمانی بعد از حرف S حرف صداداری مانند E, U, A, O بیاید باید آنرا «ز» تلفظ کرد، بله ضمن تبریک به آیدین باید گفت که «زوزه» درست است! اما ماجرا به همینجا ختم نمی‌شود، چون در جنوب آلمان که از قضا من هم آنجا هستم اینطور نیست.</p>

<p>در این منطقه وقتی حرف S در ابتدای یک کلمه باشد آنرا «سوزه»‌ تلفظ می‌کنند! مثلا مدیر سیستم محلی که در حال حاضر آنجا مشغول به کارم تلفظ «سوزه» را به کار می‌برد. بنابراین هردو تلفظ صحیح هستند ولی شاید بکارگیری «زوزه» گسترده‌تر باشد.</p>

<p>گاهی ما در مورد نکاتی بحث و گفتگو می‌کنیم و سعی داریم دیگران را متقاعد به پذیرش آن کنیم که اصلا مرز روشن و واضحی بین آنچه سعی در اثبات آن و آنچه سعی در رد آن داریم وجود ندارد. این مورد هم به نظر من اینگونه بود.</p>

<p>تصویر بالا برگرفته از سایت ویکی‌مدیا است<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>. همچنین اطلاعات بیشتری در ویکی‌پدیای آلمانی موجود است که بحث زبانشناسی است<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>‏<a href="http://commons.wikimedia.org/wiki/File:Ik-ich-Isogloss_-_Uerdinger_Lien.svg">Uerdinger Linie</a> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p><a href="http://de.wikipedia.org/wiki/Stimmhafter_alveolarer_Frikativ">Stimmhafter alveolarer Frikativ</a> <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>]]>
			</content>
	</entry>

	<entry>
		<title>حق دسترسی فایل‌ها در لینوکس به زبان ساده</title>
		<link rel="alternate" type="text/html" href="http://mehdix.ir/linux-permissions-made-simple.html"/>
		<id>urn:uuid:4e824eb2-91bf-43ce-8efc-b4f007026f72</id>
		<updated>2015-01-08T00:00:00Z</updated>
		<category term="لینوکس"/><category term="فایل"/><category term="حق"/><category term="دسترسی"/>
			<content type="html">
				<![CDATA[<div dir="rtl"><p>بارها برام پیش اومده که موقع تغییر فایل‌های لینوکس به خاطر مجوز اونها به مشکل خوردم. تصمیم گرفتم یکبار با دقت این مجوزها رو بخونم و به زبان ساده در وبلاگم بنویسم. البته این راهنما قرار نیست کامل باشه و بیشتر یک یادداشته برای مراجعات بعدی خودم.</p>

<p>اگر در یک ترمینال دستور <code>ls -l</code> یا <code>ll</code> رو تایپ کنیم چیزی شبیه به این می‌بینیم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>mehdix@spielplatz:~/Desktop/perm$ ls -l
total 4
drwxrwxr-x 2 mehdix mehdix 4096 Jan  8 09:38 dir1
-rw-rw-r-- 1 mehdix mehdix    0 Jan  8 09:38 file1
</pre></div>
</div>
</div>

<p>حق دسترسی و مالکیت دو موضوع تقریبا مستقل از هم هستند. ستون اول خروجی دستور بالا حق دسترسی روی فایل و پوشه موجود رو نشون می‌ده ولی ستون‌های سوم و چهارم حق مالکیت بر روی فایل‌ها رو نشون می‌ده. لازمه بگم که پوشه هم یک جور فایل است با این تفاوت که آدرس فایل‌های دیگر رو درون خودش نگه می‌داره (مراجعه کنید به <code>inode</code>). در ادامه هر دو رو شرح می‌دیم.</p>

<h2 id="section">مالکیت</h2>
<p>وقتی یک فایل یا پوشه رو با دستورات و اپراتورهای مختلف از جمله <code>mkdir</code>  (بخوانید make directory) و <code>touch</code> و <code>echo</code> و <code>&lt;</code> و <code>&lt;&lt;</code>  (این دو تا رو نمی‌دونم چطور بخونیم!) می‌سازیم مالکیت فایل تولیدی هم به ما داده می‌شه. در مثال بالا ستون سوم مالک رو نشون می‌ده و ستون چهارم هم گروه کاربری رو. معنی مالک در لینوکس مثل معنی اون در دنیای واقعی است. یعنی مالک تصمیم می‌گیره چه کسی به فایل اون بتونه «نگاه» کنه یا «دست بزنه». می‌تونید تصور کنید که پدر مالک ماشینه و اون تصمیم می‌گیره که اجازه بده که فرزندش به ماشین فقط نگاه کنه یا پشت فرمون هم بشینه.
نکته مهم اینجا اینه که مالک یک فایل تصمیم می‌گیره که <strong>حق دسترسی‌های</strong>‌ اون فایل چی باشه. جالبه بدونید که مالک می‌تونه حق دسترسی خواندن و نوشتن و اجرا کردن خودش رو هم روی فایل محدود کنه اما از جایی که مالکیت فایل رو در اختیار داره می‌تونه دوباره اون رو سر جاش برگردونه.
پس یادمون می‌مونه که حق مالکیت جدا از حق دسترسی است.</p>

<h2 id="section-1">گروه کاربری</h2>
<p>هر فایلی حتما یک مالک داره که حق دسترسی‌های اون رو تعیین می‌کنه اما علاوه بر این هر فایلی به یک گروه هم تعلق داره. یک گروه نماینده کاربرانی است که حقوقی متفاوت از کاربر عادی در دسترسی به فایل‌ها دارند. یعنی بواسطه گروهشون به فایل‌هایی دسترسی داشته باشند که کاربرشون به تنهایی نداره. یک کاربر می‌تونه در بیش از یک گروه عضو باشه اما یک فایل فقط می‌تونه متعلق به یک گروه باشه. 
در مثال بالا هم ستون چهارم گروه کاربری رو نشون می‌ده. روی کامپیوتر اوبونتوی من که یک کاربر بیشتر نداره (البته به استثنای کاربر <em>root</em>) کاربر و گروه کاربری من یکیه. هر کاربر حتما باید عضو یک گروه باشه بنابراین به طور پیشفرض یک گروه بنام خود کاربر روی سیستم موقع نصب ساخته شده.
گروه کاربری وقتی به درد می‌خوره که با بیش از یک کاربر سر و کار داشته باشیم. مثلا بخوایم به همه کاربرهایی که اعتماد داریم اجازه خواندن و نوشتن بدیم و به سایر کاربرهای سیستم فقط اجازه خواندن بدیم. در این صورت می‌تونیم گروهی که کاربران مورد اعتماد ما عضوش هستند رو به عنوان گروه فایل تنظیم کنیم.</p>

<h3 id="chown">تغییر مالک و گروه کاربری فایل‌ها با chown</h3>
<p>هر کاربر می‌تونه حقوق دسترسی روی یک فایل رو که در مالکیت اوست تغییر بده اما نمی‌تونه مالکیت فایل رو تغییر بده. این کار باید توسط کاربر <em>root</em> انجام بشه. در ضمن وقتی ما از دستور <code>root</code> استفاده می‌کنیم (در سیستم‌های مشابه دبیان) داریم با دسترس کاربر روت تغییرات رو انجام می‌دیم.
هرچند یک کاربر می‌تونه گروه کاربری یک فایل رو به گروهی جدید تغییر بده به شرط اینکه خودش عضو گروه جدید باشه. به عبارت دیگه یک کاربر می‌تونه گروه یک فایل رو بین گروه‌هایی که خودش عضو اونهاست دست به دست کنه.</p>

<p>دستور اصلی برای تغییر مالکیت فایل‌ها <code>chown</code> است (بخوانید change owner) به این ترتیب:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chown username:groupname file1 file2 [or directory]
</pre></div>
</div>
</div>

<p>در دستور بالا <em>username</em> نام کاربری است که می‌خواهیم فایل‌ها به اون تعلق داشته باشند و نیز <em>groupname</em> نام گروهی است که می‌خواهیم فایل‌ها به آن تعلق داشته باشند.</p>

<p>این دستور رو به دو شیوه دیگر هم می‌شه اجرا کرد. فقط برای تغییر مالک فایل به شکل زیر:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chown username file1 file2 [or directory]
</pre></div>
</div>
</div>

<p>و تنها برای تغییر گروه فایل به این شکل (دو نقطه فراموش نشود):</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chown :groupname file1 file2 [or directory]
</pre></div>
</div>
</div>

<p>برای تغییر گروه دستور <code>chgrp</code> را هم می‌توان بکار برد (بخوانید change group):</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chgrp groupname file1 file2 [or directory]
</pre></div>
</div>
</div>

<p>با بکارگیری فلگ <em>-R</em> تغییرات به همه زیرشاخه‌ها هم اعمال خواهد شد:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chown -R username:groupname directory
</pre></div>
</div>
</div>

<h3 id="section-2">حق دسترسی‌ برای فایل‌ها</h3>
<p>برای هر فایل می‌شه سه نوع حق‌دسترسی تعریف کرد: حق‌نوشتن و حق خواندن و حق اجرا کردن فایل.</p>

<ul>
  <li>
    <p><strong>حق خواندن</strong> یعنی دیدن محتوای فایل و استفاده از دستوراتی مانند <code>less</code> و <code>cat</code> و غیره. حق خواندن با <strong>r</strong> نشان داده می‌شود.</p>
  </li>
  <li>
    <p><strong>حق نوشتن</strong> یعنی تغییر محتویات فایل. فوروارد کردن خروجی یک دستور به یک فایل و اضافه کردن به فایل و مانند اینها. حق خواندن با <strong>w</strong> نشان داده می‌شود.</p>
  </li>
  <li>
    <p><strong>حق اجرای فایل</strong> اگر ما روی یک فایل حق اجرا داشته باشیم می‌توانیم از سیستم عامل بخواهیم که آن فایل را مثل یک برنامه برای ما اجرا کند. اگر فایل باینری باشد حق اجرا کفایت می‌کند اما اگر فایل اسکریپت باشد از جایی که باید یک برنامه دیگر آنرا بخواند و اجرا کند علاوه بر حق اجرا حق خواندن نیز لازم است. حق خواندن با <strong>x</strong> نشان داده می‌شود.</p>
  </li>
</ul>

<h3 id="section-3">حق دسترسی برای پوشه‌ها</h3>
<p>برای هر پوشه هم می‌شود سه نوع حق دسترسی تعریف کرد. خواندن و نوشتن و ‫<strong>جستجو</strong>. این معانی با قبلی‌ها تفاوت دارند.</p>

<ul>
  <li>
    <p><strong>حق خواندن</strong> به معنای دیدن لیست فایل‌های درون یک پوشه است با بکارگیری دستوری مانند <code>ls</code> (بخوانید list ). هرچند این به معنی خواندن محتوای فایل‌های داخل آن نیست.</p>
  </li>
  <li>
    <p><strong>حق نوشتن</strong> به معنی امکان افزودن‌ فایل‌های جدید به پوشه و همچنین تغییر نام و انتقال فایل‌های موجود است، برای مثال با دستور <code>mv</code>.</p>
  </li>
  <li>
    <p><strong>حق اجرا روی یک پوشه</strong> به معنی اینست که پوشه قابل جستجو است و می‌توان نام آنرا برای دسترسی به یک فایل دارای حق اجرا بکار برد.</p>
  </li>
</ul>

<h3 id="chmod">تغییر دسترسی‌ها با chmod</h3>
<p>یک کاربر می‌تونه حق خواندن و نوشتن و اجرای فایل‌هایی که تحت مالکیت خودش قرار دارند رو تغییر بده. همونطور که در بالا گفتیم rwx حرف اول مجوزهایی هستند که برای هر فایل بکار می‌ره. برای هر فایل سه دست حق دسترسی تعریف شده، هر دست شامل مجوز خواندن و نوشتن و اجرا است. یک دست برای مالک و یک دست برای گروه و یک دست برای سایر کاربران. در مجموع نه بیت برای اینکار بکار رفته که هر سه بیت یک دست حق دسترسی رو نشون می‌ده. هر بیت اگر ست شده باش (یعنی مقدر ۱ بهش داده شده باشه) بسته به اینکه بیت خواندن یا نوشتن یا اجرا باشه با r و w و x نشون داده خواهد شد. حالا با مراجعه دوباره به لیستی که اول نوشته داشتیم اینها رو مرور می‌کنیم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>mehdix@spielplatz:~/Desktop/perm$ ls -l
total 4
drwxrwxr-x 2 mehdix mehdix 4096 Jan  8 09:38 dir1
-rw-rw-r-- 1 mehdix mehdix    0 Jan  8 09:38 file1
</pre></div>
</div>
</div>

<p>در مثال بالا خط‌های تیره در ستون اول نماینده بیت‌هایی هستند که ست نشده‌اند (مقدارشان صفر است). به ترتیب از چپ به راست اولین بیت اگر d باشد یعنی یک پوشه است اگر l باشد یعنی لینک سمبلیک است و اگر - باشد یعنی فایل معمولی است. نه سه تای بعدی مجوزهای مالک سه تای دوم مجوزهای گروه و سه تای سوم مجوزهای سایر کاربران هستند.</p>

<p>برای این منظور از دستور <code>chmod</code> ‏‎(بخوانید change mode) استفاده می‌کنیم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chmod [references][operator][modes] file1 ...
</pre></div>
</div>
</div>

<p>در دستور بالا <code>references</code> برای انتخاب سِت مورد نظر است، مالک و/یا گروه و/یا سایر کاربران. جدول زیر نشاندهنده حروفی است که به این منظور بکار می‌رود:</p>

<table>
  <tbody>
    <tr>
      <td>رفرنس</td>
      <td>کلاس</td>
      <td>شرح</td>
    </tr>
    <tr>
      <td>u</td>
      <td>user</td>
      <td>مالک فایل</td>
    </tr>
    <tr>
      <td>g</td>
      <td>group</td>
      <td>کاربرانی که عضو گروه فایل هستند</td>
    </tr>
    <tr>
      <td>o</td>
      <td>other</td>
      <td>کاربرانی که عضو گروه فایل نیستند</td>
    </tr>
    <tr>
      <td>a</td>
      <td>all</td>
      <td>همه موارد بالا</td>
    </tr>
  </tbody>
</table>

<p>در ادامه با مثال کاربرد این حروف را می‌بینیم. اوپراتورها هم یا + یا - یا = هستند:</p>

<ul>
  <li><strong>به علاوه +</strong> به معنی افزودن یک ‫<em>مود</em> به رفرنس‌های نامبرده است</li>
  <li><strong>منها -</strong> به معنی حذف یک <em>مود</em> از رفرنس‌های نامبرده است</li>
  <li><strong>مساوی =</strong> به معنی اعمال یک <em>مود</em> به همه رفرنس‌هاست</li>
</ul>

<p><strong>مودها</strong> یا حالت‌ها هم همان حق خواندن و نوشتن و اجرا هستند که البته سه مود دیگر بنام‌های X (با حرف بزرگ) و s و t هم داریم که فعلا به آنها نمی‌پردازیم.</p>

<p>حالا چند مثال. فایل یک از مثال بالا را تغییر می‌دهیم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chmod ug+rw file1
</pre></div>
</div>
</div>

<p>یعنی به کاربر مالک و گروه مالک حق خواندن و نوشتن را اضافه کن و این شد نتیجه:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>-rw-rw-r-- 1 mehdix mehdix 0 Jan  8 10:20 file1
</pre></div>
</div>
</div>

<p>حالا همون حقوقی رو که خودمون دادیم پس می‌گیریم :) به این شکل:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chmod ug-rw file1
</pre></div>
</div>
</div>

<p>و این هم نتیجه:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>-------r-- 1 mehdix mehdix 0 Jan  8 10:20 file1
</pre></div>
</div>
</div>

<p>یا مثلا گرفتن و دادن همه مجوزها به همه کاربران:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chmod a+rw file1
chmod a-rw file1
</pre></div>
</div>
</div>

<p>یا مثلا دادن <strong>تنها</strong> امکان خواندن به سایر کاربران:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>chmod o=r file1
</pre></div>
</div>
</div>

<p>دقت کنید که بکارگیری = باعث از بین رفتن مجوزهای قبلی می‌شه در حالی که + و - مجوزها رو اضافه و حذف می‌کنند و کاری به بقیه ندارند. این‌ها در حقیقت همون عملیات and و or و mask کردن بیت‌ها در کامپیوتره.</p>

<p>نوشتن این یادداشت باعث شد خودم بهتر این موارد رو به خاطر بسپرم. موارد بیشتری هم هست که بهرحال فهم این نکات اولیه به یادگیری بقیه هم کمک می‌کنه. منابعی هم که بکار گرفتم در انتهای مطلب<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup><sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup><sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup><sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup> هست.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>‏<a href="http://www.rackspace.com/knowledge_center/article/linux-file-permission-concepts">linux-file-permission-concepts</a> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>‏<a href="https://en.wikipedia.org/wiki/Modes_(Unix)">Unix Modes</a> <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>‏<a href="http://www.grymoire.com/Unix/Permissions.html#toc-uh-0">Permissions</a> <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>‏<a href="http://unix.stackexchange.com/a/140944/87940">Stackexchange Question</a> <a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>]]>
			</content>
	</entry>

	<entry>
		<title>ماموریت روزتا</title>
		<link rel="alternate" type="text/html" href="http://mehdix.ir/rosetta-mission.html"/>
		<id>urn:uuid:81b19830-234e-42a9-b5ce-b1ba6218ff8d</id>
		<updated>2014-12-30T00:00:00Z</updated>
		<category term="فضا"/><category term="سرگرمی"/><category term="هابی"/>
			<content type="html">
				<![CDATA[<div dir="rtl"><p>نمی‌دونم که آیا تابحال چیزی راجع به ‫‫‫«<a href="http://fa.wikipedia.org/wiki/%D8%B1%D8%B2%D8%AA%D8%A7_(%D9%81%D8%B6%D8%A7%D9%BE%DB%8C%D9%85%D8%A7)">ماموریت روزِتا</a>» شنیدین یا نه؟ این ماموریت یک سفر فضایی است برای ملاقات با یک دنباله‌دار که من با علاقه دنبالش می‌کنم.</p>

<h1 id="section">معرفی</h1>
<p>این پروژه از بیست سال پیش شروع شده و ده سال پیش سفینه به فضا پرتاب شده. الان چندین ماهه که روزِتا به دنباله‌دار «<a href="http://fa.wikipedia.org/wiki/%DB%B6%DB%B7_%D9%BE%DB%8C/%DA%86%D9%88%D8%B1%DB%8C%D9%88%D9%85%D9%88%D9%81-%DA%AF%D8%B1%D8%A7%D8%B3%DB%8C%D9%85%D9%86%DA%A9%D9%88">چوریموف-گراسیمنکو/P-67</a>» رسیده و در مداری به دور اون در گردشه. ماه گذشته هم یک سطح‌نورد بنام «فیله» رو روی دنباله‌دار نشوند که فرودش موفقیت آمیز نبود و بعد از چند ساعت با خالی شدن باطری‌های اولیه‌اش خاموش شد.</p>

<p>این <a href="http://rosetta.esa.int/">پروژه</a> توسط «سازمان فضانوردی اروپا» بنام ESA انجام شده و از شهر دارمِشتات آلمان هدایت می‌شه.</p>

<h1 id="section-1">ویدیو</h1>
<p>برای پروژه روزتا کارتون‌ها و انیمیشن‌های زیبایی ساخته شده که در کانال یوتیوب سازمان فضایی اروپا قابل دیدنه. من اینجا یکی از این ویدیوها رو، به نام <em>Ambition</em>، که حال و هوایی حماسی داره قرار می‌دم. اگر سرعت اینترنت قابل قبولی دارین حتما تماشا کنید. خودم که هر چندوقت یکبار میام و می‌بینم!</p>

<iframe src="https://new.livestream.com/accounts/362/events/3544091/videos/66902310/player?autoPlay=false&amp;height=360&amp;mute=false&amp;width=640" width="640" height="360" frameborder="0" scrolling="no"></iframe>
</div>]]>
			</content>
	</entry>

	<entry>
		<title>یک پلاگین دیگر برای جکیل</title>
		<link rel="alternate" type="text/html" href="http://mehdix.ir/urljoin.html"/>
		<id>urn:uuid:3b60f7d6-290d-434c-9e74-182acdafe804</id>
		<updated>2014-12-28T00:00:00Z</updated>
		<category term="جکیل"/><category term="پلاگین"/>
			<content type="html">
				<![CDATA[<div dir="rtl"><p>از جایی که وبسایتم رو تحت <a href="https://mehdix.org/fa">یک زیردامنه</a> نیز منتشر می‌کنم مشکلی با تولید لینک‌ها در جکیل داشتم که برایش یک <a href="https://github.com/mehdisadeghi/mehdix.ir/blob/master/_plugins/urljoin.rb">پلاگین</a> ساده نوشتم.</p>

<p>مشکل اینجا بود که وقتی مقدار <code>baseurl</code> رو در فایل تنظیمات سایت تغییر می‌دادم بعضی از لینک‌ها با دو تا <code>/</code> تولید می‌شدند. با نگاه به کدهای سایت دیدم که ‏<a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers#standard-filters">لیکوئید</a> تعدادی فیلتر ساده داره که در جکیل هم استفاده شده اما فیلتر خاصی برای متصل کردن لینک‌ها نداره. چنین فیلتری از اون جهت می‌تونه مفید باشه که سردرد طراح سایت رو کم می‌کنه و دیگه لازم نیست دائم کنترل کنیم که آیا لینک درست تولید شده یا نه. بنابراین من یک فیلتر برای لیکوئید نوشتم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">Jekyll</span>
  <span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">URLJoinFilter</span>
    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">urljoin</span>(first, second)
      <span style="color:#036;font-weight:bold">File</span>.join(first, second)
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#036;font-weight:bold">Liquid</span>::<span style="color:#036;font-weight:bold">Template</span>.register_filter(<span style="color:#036;font-weight:bold">Jekyll</span>::<span style="color:#036;font-weight:bold">URLJoinFilter</span>)
</pre></div>
</div>
</div>

<p>حالا من در کدم می‌تونم از این فیلتر به سادگی استفاده کنم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>
<span style="color:#070;font-weight:bold">&lt;a</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">post-link</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">{{ site.baseurl | urljoin: post.url}}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>{{ post.title }}<span style="color:#070;font-weight:bold">&lt;/a&gt;</span>

</pre></div>
</div>
</div>

<p>من کد پلاگین رو در فولدر <code>_plugins</code> در داخل فایل‌های سایتم قرار دادم که موقع بیلد کردن سایت کار خودش رو انجام می‌ده.</p>
</div>]]>
			</content>
	</entry>

	<entry>
		<title>kramdown</title>
		<link rel="alternate" type="text/html" href="http://mehdix.ir/kramdown.html"/>
		<id>urn:uuid:50418455-c289-4c3b-b40d-05c9e70b2a6f</id>
		<updated>2014-12-21T00:00:00Z</updated>
		<category term="markup"/><category term="kramdown"/><category term="markdown"/><category term="jekyll"/>
			<content type="html">
				<![CDATA[<div dir="rtl"><p>طی هفته‌های گذشته مشغول راه‌اندازی این وبسایت بودم. مثل هر پروژه دیگری کلی مطلب در طول انجام اینکار یاد گرفتم، فرآیندی که همچنان ادامه داره. یکی از این موارد آشنایی با <a href="http://kramdown.gettalong.org/">kramdown</a> بود.</p>

<h1 id="section">یک پارسِر دیگر مارک‌داون</h1>
<p><em>kramdown</em> در ساده‌ترین حالت یک پارسِر مارک‌داون محسوب می‌شه اما ویژگی‌هایی هم داره که در مارک‌داون وجود نداره. من به طور خاص از ویژگی <a href="http://kramdown.gettalong.org/syntax.html#block-ials">Inline Attribute Lists</a> صحبت می‌کنم.</p>

<p>اگر به تنظیمات جکیل من نگاه کنید من <em>kramdown</em> رو به عنوان پارسر انتخاب کردم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#606">markdown</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kramdown</span></span>
</pre></div>
</div>
</div>

<p>این باعث می‌شه که جکیل کد صفحات من را با پارسِر درست ترجمه کنه و بنابراین من می‌تونم از سینتکس اون استفاده کنم.</p>

<h1 id="section-1">مشکل از کجا شروع شد</h1>
<p>من مشکلی داشتم در نمایش افقی و مرکزی عکس‌ها. جکیل به صورت پیشفرض تصاویر رو سمت چپ (و وقتی راست‌چین شده باشه سمت راست) قرار می‌داد و این چیزی نبود که من می‌خواستم. و اما کدی که ژنراتور جکیل برای یک بلاک عکس تولید می‌کرد حاوی یک تگ <code>p</code> و یک تگ <code>img</code> داخل اون بود. به این صورت:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#070;font-weight:bold">&lt;p&gt;</span>
<span style="color:#070;font-weight:bold">&lt;img</span> <span style="color:#b48">href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">alt</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/p&gt;</span>
</pre></div>
</div>
</div>

<p>که این کد خروجی سینتکس زیر در کد من بود:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>![image](URL)
</pre></div>
</div>
</div>

<p>اشکال اینجا بود که تگ‌های تولید شده کلاس یا آی‌دی خاصی نداشتند که من بتونم میون انبوه کدهای تولید شده برای صفحه اونها رو پیدا کنم. اینجا بود که IAL به کمکم اومد. بعد از ثبت یک ایشو در جکیل و بعد یک ایشو در kramdown بالاخره به جواب رسیدم. به این صورت که من می‌تونم به فرمت زیر قبل از یک بلاک عکس (یا هر بلاک دیگری) یک کلاس دلخواه رو به تگ تولید شده نسبت بدم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>{: .center}
![image](URL)
</pre></div>
</div>
</div>

<p><code>center</code> در اینجا اسم دلخواهیه که من انتخاب کردم. بعد از این مرحله خروجی کد شد این:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#070;font-weight:bold">&lt;p</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
<span style="color:#070;font-weight:bold">&lt;img</span> <span style="color:#b48">href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">alt</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/p&gt;</span>
</pre></div>
</div>
</div>

<p>ناگفته پیداست که حالا من می‌تونم در کد <code>css</code> براحتی استایل دلخواهم رو به این کلاس نسبت بدم:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#B06;font-weight:bold">.center</span>{
    <span style="color:#606">text-align</span>: <span style="color:#088">center</span>;
}
</pre></div>
</div>
</div>

<p>چند مثال هم از مستندات خودشون:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>A simple paragraph with an ID attribute.
{: #para-one}

&gt; A blockquote with a title
{:title=&quot;The blockquote title&quot;}
{: #myid}

{:.ruby}
    Some code here
</pre></div>
</div>
</div>

<h1 id="section-2">خلاصه</h1>
<p>به کمک این روش می‌شه براحتی <em>attribute</em>هایی برای المان‌های مختلف الصاق کرد. فقط کافیه که <em>بلافاصله</em> قبل یا بعد از المان مربوطه کد IAL لازم نوشته بشه.</p>
</div>]]>
			</content>
	</entry>

	<entry>
		<title>وبلاگ جکیل روی دامنه شخصی</title>
		<link rel="alternate" type="text/html" href="http://mehdix.ir/jekyll-structure.html"/>
		<id>urn:uuid:51c37d6c-cec3-4a94-8310-2690ec53f728</id>
		<updated>2014-12-19T00:00:00Z</updated>
		<category term="جکیل"/><category term="وب"/>
			<content type="html">
				<![CDATA[<div dir="rtl"><p><strong>منتشر شده در شماره سه ماهنامه سلام‌دنیا</strong> – این مقاله قسمت دوم راهنمای ساخت وبلاگ با جکیل و گیت‌هاب است که برای سلام‌دنیا نوشتم و اینجا با مقداری تغییرات منتشر می‌کنم.</p>

<p>در قسمت اول از این مقاله شرح دادیم که مزایای یک وبسایت ایستا در مقایسه با یک وبسایت پویا چیست و  چه کاربردهایی دارد و دیگر اینکه ما می خواهیم با امکانات موجود در اینترنت و با حداقل هزینه وبسایت بسازیم. در قسمت قبلی در مورد گیت‌هاب صحبت کردیم و اینکه چگونه باید مخزن لازم برای وبسایتمان را آنجا بسازیم و چطور آنرا تغییر و برزورسانی کنیم و در نهایت وبسایت خودمان را تحت دامنه <em>github.io</em> منتشر کردیم. چیزهایی که تا اینجا کفتیم در حقیقت اسکلت اصلی وبسایت‌سازی با گیت‌هاب بود اما هنوز در مورد ابزار اصلی اینکار که <em>Jekyll</em> است صحبتی نکرده‌ایم بنابراین در این بخش به آن می‌پردازیم.</p>

<p>صفحات‌گیت‌هاب علاوه بر پشتیبانی از فایل‌های <em>HTML</em> عادی، از <em>Jekyll</em> که یک مولّد صفحات ایستا‍<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> است نیز پیشتبانی می‌کند یعنی می‌تواند ازروی یک پروژه جکیل وبسایت بسازد. جکیل تمام امکانات لازم برای ساخت وب‌سایت‌ را به صورت آفلاین در اختیار شما می‌گذارد، امکاناتی از قبیل تولید هدر و فوتر برای تمامی صفحات وب‌سایت بدون نیاز به تکرار آنها در صفحات مختلف و نیز پیشتبیانی از چند زبان الگو<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup> جهت نوشتن قالب<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup> ساخت. جکیل یک پروژه‌ی مستقل از گیت‌هاب است اما وب‌سرور صفحات گیت‌هاب قادر است پروژه‌های جکیل را بفهمد و آنها را به درستی نمایش بدهد.</p>

<blockquote>
  <p>نکته: در فاصله قسمت اول و این قسمت من وبسایت خودم را با جکیل کامل کردم و در ادامه مطلب از آن در مثال‌ها استفاده خواهم کرد. در صورتی که قصد ساخت یک وبلاگ یا وبسایت فارسی راست به چپ داشته باشید می‌توانید کدها و قالب‌های استفاده شده در مخزن آن را تغییر دهید و برای ساخت وبسایت خودتان از آن استفاده کنید.</p>
</blockquote>

<p>برای شروع کار با جکیل پیش از هرچیز باید آنرا روی کامپیوترمان نصب کنیم. از جایی که جکیل با زبان برنامه‌نویسی روبی نوشته شده است،‌ لازم است که روبی هم روی دستگاه ما نصب باشد (ما به نصب روبی نمی‌پردازیم):</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">~ <span class="nv">$ </span>gem install jekyll</code></pre></div>

<p>نکته: بسته به تنظیمات دستگاه شما ممکن است لازم باشد این دستور را با کاربر <em>root</em> اجرا کنید. 
بعد از اتمام این مرحله  فرمانی بنام <em>jekyll</em> روی دستگاه ما نصب شده است و می‌توانیم از آن استفاده کنیم. لازم است توضیح بدهم که ما از این دستور جهت ایجاد ساختار اولیه یک وبسایت مبتنی بر جکیل و نیز مشاهده خروجی جکیل روی دستگاه خودمان استفاده می‌کنیم در حقیقت ما از این دستور فقط برای ساخت وبسایت استفاده می‌کنیم وگرنه گیت‌هاب قادر است کدهای جکیل را بفهمد.حال مخزنی را که قرار است کدهای وبسایت ما را در خودش نگهداری کند شبیه‌سازی می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">~ <span class="nv">$ </span>git clone https://github.com/mehdisadeghi/mehdix.ir
~ <span class="nv">$ </span><span class="nb">cd </span>mehdix.ir
~/mehdix.ir <span class="nv">$ </span>git checkout -b gh-pages</code></pre></div>

<p>به کمک دستورات بالا اول مخزن را روی دستگاهمان شبیه‌سازی کردیم (شرح آن در قسمت اول رفت) و بعد به شاخه gh-pages سوئیچ کردیم و حالا ساختار پروژه جکیل را در این مسیر ایجاد می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">~/mehdix.ir <span class="nv">$ </span>jekyll new . -- دقت کنید که نقطه جزوی از دستوراست به معنی مسیر جاری
~/mehdix.ir <span class="nv">$ </span>jekyll serve</code></pre></div>

<p>خط اول از فرامین بالا سایت را می‌سازد و خط بعدی نیز باعث می‌شود که جکیل وبسایت را از روی کدهای موجود بسازد و بعد توسط  وب‌سرور توکارش آنرا نمایش بدهد. پس از اجرای دستورات بالا وبسایت محلی ما در آدرس ‎‎<a href="http://localhost:4000">http://localhost:4000</a> در دسترس خواهد بود. قبل از اینکه به سراغ مرحله بعدی برویم ساختار و همه فایل‌های تولید شده توسط جکیل را به مخزن گیت‌هابمان اضافه می‌کنیم (باید صریحا به گیت بگوییم که کدام فایل‌ها باید به مخزن اضافه شوند، صرف کپی کردن کافی نیست):</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">~/mehdix.ir <span class="nv">$ </span>git add --all</code></pre></div>

<p>با دستور بالا فایل‌های تولید شده از این لحظه توسط گیت مدیریت می‌شوند و موقع کامیت می‌توان آنها را هم ثبت کرد. هنگام افزون هر فایل جدید نیز باید آنرا با دستور زیر به گیت اضافه کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">~ <span class="nv">$ </span>git add &lt;FILENAME&gt;</code></pre></div>

<blockquote>
  <p>نکته گیت برای حرفه‌ای‌ها: در صورتی که برای دریافت مخزن از لینک https استفاده کنید موقع کامیت تغییرات باید کلمه عبور و رمز گیت‌هاب خود را وارد کنید ولی در صورتی که کلید عمومی دستگاه خود را به لیست کلیدهای مورد اعتماد در حساب کاربری گیت‌هاب خودتان اضافه کنید می‌توانید از آن دستگاه خاص بدون وارد کردن اطلاعات حساب کاربری تغییرات خود را در گیت‌هاب ثبت کنید. برای استفاده از این مورد لازم است که مخزن را با لینک ssh دریافت کرده باشید.</p>
</blockquote>

<p>حالا تغییرات را ثبت می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">~/mehdix.ir <span class="nv">$ </span>git commit -am ”Jekyll basic structure added”
~/mehdix.ir <span class="nv">$ </span>git push -- باید کلمه عبور و رمز گیت‌هابمان را وارد کنیم</code></pre></div>

<p>هر بار که تغییری در سایت می‌دهیم باید به روش بالا آنرا به مخزن محلی خودمان اضافه کنیم و  پس از کامیت کردن تغییرات آنها را در مخزن گیت‌هاب پوش کنیم در غیر اینصورت تغییرات فقط روی دستگاه ما قرار خواهند گرفت. ما بیش از این در این مورد توضیح نمی‌دهیم و به سراغ بخش‌های دیگر جکیل می‌رویم.</p>

<p>اگر به ساختار پروژه تولید شده توسط جکیل نگاه کنیم موارد زیر را خواهیم دید:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">~/mehdix.ir <span class="nv">$ </span>ls
about.md  _config.yml  css  feed.xml  _includes  index.html  _layouts  _posts  _sass  _site</code></pre></div>

<p>فایل <em>config.yml_</em> حاوی تنظیمات جکیل است. لیست کاملی از مواردی که می‌توان در این فایل تغییر داد در <a href="http://jekyllrb.com/docs/configuration/">مستندات جکیل</a> در موجود است. مهمترین موارد شامل نام نویسنده و عنوان و شرح وبسایت و نیز مجوزمطالب می‌باشد. جکیل این موارد را در تگ‌های <code>html</code> صفحات سایت ما قرار خواهد داد.</p>

<blockquote>
  <p>نکته برای حرفه‌ای‌ها: در صورتی که می‌خواهید روی سرور شخصی وب‌سرور توکار جکیل را اجرا کنید مقدار host را در این فایل تغییر بدهید.</p>
</blockquote>

<p>سایر مواردی که باید در مورد ساختار پروژه جکیل بدانیم یکی پوشه <em>_posts</em> است. این پوشه حاوی فایل‌های متنی است که هر کدام یک مطلب وبسایت ما است. هر مطلب جدید در یک فایل جدید قرار می‌گیرد. نام این فایل از یک قالب خاص یپروی می‌کند. تاریخ انتشار مطلب و عنوان مطلب از نام فایل استخراج خواهد شد. به مثال زیر توجه کنید:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">2014-11-10-publishing-with-jekyll.md</code></pre></div>

<p>نام این فایل حاوی تاریخ انتشار است که با خط تیره تفکیک شده است و عنوان مطلب بلافاصله بعد از تاریخ آمده است. پسوند فایل هم نوع زبان نشانه‌گذاری بکاررفته در نوشته را مشخص می‌کند که دراین مورد <em>markdown</em> است. این هم <a href="https://help.github.com/articles/markdown-basics/">یک راهنمای کوتاه و مفید</a> در این مورد.</p>

<p>لازم است بدانیم که فایل‌هایی از پروژه که دارای سرآمد<sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup> YAML باشند به صورت ویژه‌ای پردازش می‌شوند. این سرآمد برای این پست چیزی است شبیه به این:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="nn">---</span>
<span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">پیشگفتار</span>
<span class="l-Scalar-Plain">category</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">general</span>
<span class="l-Scalar-Plain">tags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">وبلاگ جکیل هکر</span>
<span class="nn">---</span></code></pre></div>

<p>می‌بینیم که مقادیری بین دو جفت خط تیره سه‌گانه تعریف شده‌اند. این مقادیر برای جکیل با معنی هستند. مثلا با <code>title</code> من عنوان مطلب را فارسی کرده‌ام چرا که در غیر اینصورت عنوان از نام فایل استخراج می‌شد که انگلیسی است. برای مطلب دسته و تگ هم تعریف شده است که اختیاری است. بدنه اصلی مطلب هم بعد از این سرآمد در فایل نوشته می‌شود.</p>

<p>بخش مهم بعدی که لازم است با آن آشنا باشید فایل <em>index.html</em> است. این فایل هم دارای سرآمد <strong>YAML</strong> است که ما در این راهنمای مقدماتی آن را تغییر نمی‌دهیم. فقط کافی است بدانیم که طرح<sup id="fnref:5"><a href="#fn:5" class="footnote">5</a></sup> و قالب پیش‌فرضی که محتویات این فایل را در برخواهد گرفت در این سرآمد تعریف شده است:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="nn">---</span>
<span class="l-Scalar-Plain">layout</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">default</span>
<span class="nn">---</span></code></pre></div>

<p>در صورتی که به محتویات پوشه <em>layouts_</em> نگاهی کنیم طرح‌های قابل استفاده برای هر نوع محتوا را خواهیم یافت، از جمله <em>post</em> برای هر مطلب و نیز <em>default</em> برای صفحه اصلی. زبان استفاده شده در این فایل‌ها <strong>liquid</strong><sup id="fnref:6"><a href="#fn:6" class="footnote">6</a></sup> نام دارد. با مقداری دقت می‌توانیم ساختار <em>html</em> صفحات اصلی و صفحه اختصاصی هر مطلب را تغییر بدهیم.</p>

<p>نکته بعدی که حتما به آن نیاز داریم آشنایی با نحوه تغییر استایل وبسایت و شخصی‌سازی آن است. فایل‌های استایل در مسیر <em>sass_</em> قرار دارند و ما می‌توانیم فایل‌های <em>base.scss_</em> و <em>layout.scss_</em> را جهت اعمال تغییرات دلخواه دستکاری کنیم.</p>

<p>مورد بعدی خوراک وبسایت ماست. هربار که مطلبی اضافه می‌کنیم جکیل یک فایل بنام <em>feed.xml</em> در ریشه وبسایت ما ایجاد می‌کند که حاوی مداخل نوشته‌های ماست. ما می‌توانیم آدرس این فایل را به خوراک‌خوان دلخواهمان بدهیم تا مطالب را آنجا دنبال کنیم.</p>

<p>هربار که ما <code>jekyll serve</code> را اجرا می‌کنیم جکیل یک وبسایت استاتیک از روی مطالب ما و تنظیمات ما می‌سازد و در مسیر <em>site_</em> کپی می‌کند. محتوای این مسیر یک وبسایت کامل است که حتی می‌توانیم در هر سرور دیگری آنرا بارگذاری کنیم اما نیازی نیست آنرا در مخزن وبسایتمان اضافه کنیم چرا که گیت‌هاب این خروجی را از روی فایل‌های پروژه خواهد ساخت.</p>

<blockquote>
  <p>نکته: پس از تغییر مقادیر این فایل دوباره <code>jekyll serve</code> را اجرا کنید، چرا که جکیل فقط یکبار فایل تنظیمات را می‌خواند اما تغییرات در سایر فایل‌ها را به طور زنده نمایش می‌دهد.</p>
</blockquote>

<p>جکیل قابلیت‌های فراوان دیگری دارد که از حوزه این راهنمای ساده خارج است. مواردی همچون افزودن صفحه‌گذاری[^7] و پلاگین‌ها و ساختن مجموعه‌ها و فایل‌های داده و ساخت فایل‌های پیش‌نویس و مانند اینها که خوانندگان علاقه‌مند می‌توانند کاربر برخی از آنها را در وبسایت مثال این مقاله و سایر سایت‌های مشابه پیدا کنند.</p>

<p>در اینجا به دو نکته بعدی می‌پردازیم که قولش را در قسمت اول داده بودیم. یکی بکارگیری دامنه شخصی و دیگری افزودن نظرات بازدید کنندگان. به منظور استفاده از دامنه شخصی دو روش در پیش رو داریم. یکی اینکه وبسایتمان را مستقیما تحت دامنه‌مان منتشر کنیم و دیگر اینکه تحت یک زیردامنه اینکار را انجام بدهیم. برای اینکار یک فایل بنام <strong>CNAME</strong> به مخزن وبسایتمان اضافه می‌کنیم. این فایل باید فقط دارای یک خط متن باشد که آن هم نام دامنه مورد نظر ما است:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">~/mehdix.ir <span class="nv">$ </span><span class="nb">echo</span> “mehdix.ir” &gt; CNAME -- یا مثلا blog.mehdix.ir
~/mehdix.ir <span class="nv">$ </span>git add CNAME
~/mehdix.ir <span class="nv">$ </span>git commit -am”cname file added”
~/mehdix.ir <span class="nv">$ </span>git push</code></pre></div>

<p>حالا کافیست به صفحه مدیریت دامنه خود مراجعه کنیم و تغییرات لازم را اعمال کنیم. برای بکارگیری یک زیردامنه باید بتوانیم یک رکورد <em>CNAME</em> ایجاد کنیم که به <em>username.github.io</em> اشاره کند. باید توجه داشته باشیم که تغییرات <em>DNS</em> مدتی طول می‌کشد که اعمال شود. برای اینکه وبسایت ما مستقیما تحت دامنه اصلی نمایش داده شود باید در صفحه مدیریت دامنه‌مان مقادیر مقابل را برای <em>Name Server</em> وارد کنیم: 192.30.252.153 و 192.30.252.154.
لازم است توجه کنیم که این مورد دوم کمی آسیب‌پذیر است به این معنی که ما باید مواظب تغییر در این <em>IP</em>ها باشیم. پیشنهاد گیت‌هاب استفاده از یک زیردامنه است چرا که گیت‌هاب می‌تواند به شکل موثرتری وبسایت ما را منتشر کند.</p>

<p>در قسمت آخر این مقاله به افزودن امکان نظر دادن پای مطالب می‌پردازیم. برای اینکار کافیست به یکی از سرویس دهنده‌های رایگان در وب مثل <em>disqus</em> مراجعه و یک حساب کاربری بسازیم. بعد از اینکار دامنه‌مان را به حساب کاربری‌مان اضافه می‌کنیم و پس از طی مراحل اینکار در نهایت کد لازم برای افزودن سرویس مربوطه به وبسایت را دریافت می‌کنیم. مثلا من در <em>disqus</em> ثبت نام کردم و در آن سایت می‌توانم نظرات را مدیریت کنم و همه آنها را یکجا ببینم. من پس از ثبت وبسایتم ‎<a href="https://mehdix.disqus.com/admin/settings/universalcode/">کد لازم</a> را کپی می‌کنم. حال تنها کافیست این کد را در جایی که دوست داریم نظرات نمایش داده شوند قرار دهیم. به این منظور ما کد دریافتی را در فایل <em>layouts/_posts.html</em> زیر بعد از تگ <code>article</code> کپی می‌کنیم.</p>

<p>در آخر فراموش نکنید که اگر سایتی با جکیل ساختید آنرا به ‬‬<a href="https://github.com/jekyll/jekyll/wiki/Sites">لیست سایت‌های نیرو گرفته از جکیل</a> اضافه کنید.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Static Site Generator <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Template Language <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>Layout <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p><a href="Front Matter - http://jekyllrb.com/docs/frontmatter/">Front Matter</a> <a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p><a href="https://github.com/Shopify/liquid/wiki">Liquid</a> <a href="#fnref:5" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:6">
      <p>Pagination <a href="#fnref:6" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>]]>
			</content>
	</entry>

	<entry>
		<title>طریقه نصب گواهینامه SSL روی سرور شخصی</title>
		<link rel="alternate" type="text/html" href="http://mehdix.ir/installing-ssl-certificate.html"/>
		<id>urn:uuid:e367a6cc-329f-4a68-a995-d7aa579db246</id>
		<updated>2014-12-18T00:00:00Z</updated>
		<category term="ssl"/><category term="امنیت"/>
			<content type="html">
				<![CDATA[<div dir="rtl"><p>امنیت رو باید جدی گرفت. هرچند من متخصص امنیت نیستم ولی برای درک اهمیت استفاده از پروتکل‌های امن نیازی به متخصص بودن نیست. اینکه اسم کاربری و کلمه عبور و سایر داده‌های حساس باید به شکل رمزگذاری شده ارسال بشوند دیگر چیزی بدیهی به نظر می‌رسد.</p>

<p>بنابراین من تصمیم گرفتم به قول معروف برای «فال و تماشا» یک گواهینامه SSL برای دامنه <a href="mehdix.org">mehdix.org</a> تهیه و فعال کنم. دستورات این راهنما رو من از سایت ‎<a href="https://aralbalkan.com/scribbles/setting-up-ssl-with-nginx-using-a-namecheap-essentialssl-wildcard-certificate-on-digitalocean/">آرال بالکان</a> برداشتم.</p>

<h1 id="section">بسته آموزشی گیت‌هاب</h1>
<p>من در این راهنما از یک سرور شخصی روی <a href="https://digitalocean.com">DigitalOcean</a> و همچنین یک گواهینامه SSL از namecheap.com استفاده کردم. من برای تهیه اینها پولی پرداخت نکردم، بلکه اینها رو از طریق <a href="https://education.github.com">بسته آموزشی گیت‌هاب</a> بدست آوردم. برای اینکار فقط کافیه یک ایمیل دانشگاهی داشته باشید و در پروژه‌ی بالا ثبت نام کنید و به سرویس‌های مختلفی برای تقریبا یک سال به رایگان دسترسی پیدا کنید.</p>

<p class="center"><img src="https://education.github.com/assets/sdp-backpack-6f872c4211af1bac3aef0c6e2b5fbb7a.png" alt="image" title="Github Developer Pack" /></p>

<h1 id="section-1">خرید گواهینامه</h1>
<p>من ابتدا یک گواهینامه <em>Positive SSL</em> از سایت <em>namecheap.com</em> برای دامنه‌ام خریداری کردم. بدون خرید گواهینامه هم می‌شه روی سرور شخصی اتصال <em>https</em> داشت اما توسط مرورگر تایید نمی‌شه و پیام هشدار دریافت می‌کنید. در حالی که گواهینامه بالا بعد از نصب به رنگ سبز در نوار آدرس کروم نمایش داده می‌شه. گواهینامه‌ای که من خریدم فقط برای یک دامنه تنها اعتبار داره و شامل زیردامنه‌ها نخواهد بود. برای اینکار باید از یک گواهینامه گرانتر بنام <em>Wildcard SSL Certificate</em> استفاده کرد.</p>

<h1 id="section-2">تولید کلیدهای اولیه</h1>
<p>اول به ماشین مورد نظر <em>ssh</em> می‌کنیم و دستور زیر رو جهت تولید یک کلید خصوصی وارد می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">openssl genrsa <span class="m">2048</span> &gt; key.pem</code></pre></div>

<p>فراموش نکنید که کلیدها رو به ماشین خودتون <em>scp</em> کنید. حالا یک <strong>درخواست گواهینامه</strong> تولید می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">openssl req -new -key key.pem -out csr.pem</code></pre></div>

<p>به سوالات پرسیده شده جواب بدین و برای گزینه <em>Common Name</em> اسم دامنه خودتون را با پسوندش وارد کنید (بدون پیشوند). لزومی به وارد <em>Challenge Password</em> نیست.</p>

<p>در هنگام خرید گواهینامه در سایت صادرکننده از ما درخواست <em>csr</em> خواهد شد که مخفف کلمه <strong>Certificate Signing Request</strong> است. در آنجا جهت فعالسازی گواهینامه و انجام کامل عملیات صدور باید محتویات فایل <em>csr.pem</em> را کپی کنیم. بعد از این مرحله و تکمیل مراحل صدور یک فایل زیپ شده حاوی فایل‌های زیر برای ما ایمیل خواهد شد:</p>

<ul>
  <li>yourdomain_extension.crt</li>
  <li>COMODORSADomainValidationSecureServerCA.crt</li>
  <li>COMODORSAAddTrustCA.crt</li>
  <li>AddTrustExternalCARoot.crt</li>
</ul>

<p>حال باید از روی اینها ما یک <em>Certificate Bundle</em> بسازیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">cat STAR_yourdomain_ext.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt &gt; bundle.cer</code></pre></div>

<h1 id="section-3">کپی فایل‌های گواهینامه</h1>
<p>من روی سرورم اوبونتو ۱۴.۰۴ نصب کردم و برای نصب nginx تنها کافی بود که دستور زیر رو وارد کنم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install ngingx</code></pre></div>

<p>برای کپی کردن فایل‌ها مراحل زیر رو انجام می‌دیم:</p>

<ol>
  <li><code>sudo mkdir /etc/nginx/ssl</code></li>
  <li><code>sudo mv PATH_TO_BUNDLE_FILE /etc/nginx/ssl/</code></li>
  <li><code>sudo mv PATH_TO_KEY.PEM_FILE /etc/nginx/ssl/</code></li>
  <li><code>sudo chmod 600 /etc/nginx/ssl</code></li>
</ol>

<p>دستور آخر دسترسی به پوشه فوق رو محدود به مالک می‌کنه. چون من با کاربری غیر از روت به دستگاه وصل شدم و با کاربر روت این پوشه رو ساختم دیگر تنها روته که می‌تونه رو این پوشه بخونه و بنویسه.</p>

<h1 id="nginx">تنظیم nginx</h1>
<p>حالا <em>nginx</em> رو تنظیم می‌کنیم که همه ترافیک <em>http</em>‌ رو بفرسته روی <em>https</em>:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo vim /etc/nginx/sites-available/default</code></pre></div>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">server <span class="o">{</span>
        listen <span class="m">80</span> default_server<span class="p">;</span>

        server_name mehdix.org<span class="p">;</span>

        <span class="k">return</span>   <span class="m">301</span> https://<span class="nv">$server_name$request_uri</span><span class="p">;</span>
<span class="o">}</span></code></pre></div>

<p>روی پورت ۸۰ گوش کن و هرچه درخواست برای <em>mehdix.org</em> بدستت رسید بفرست با کد ۳۰۱ روی همین سرور ولی با <em>https</em>. حالا وقت تنظیمات خود <em>https</em> رسیده:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">server <span class="o">{</span>
        listen 443<span class="p">;</span>

        server_name mehdix.org<span class="p">;</span>

        root /usr/share/nginx/html<span class="p">;</span>
        index index.html index.htm<span class="p">;</span>

        ssl on<span class="p">;</span>
        ssl_certificate /etc/nginx/ssl/bundle.cer<span class="p">;</span>
        ssl_certificate_key /etc/nginx/ssl/key.pem<span class="p">;</span>
<span class="o">}</span></code></pre></div>

<p>و یک ریستات و والسلام:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo service nginx restart</code></pre></div>

<p>و این هم رنگ خوش سبز <em>https</em> در کروم:</p>

<p><img src="assets/postimages/https.png" alt="image" /></p>

</div>]]>
			</content>
	</entry>

</feed>
